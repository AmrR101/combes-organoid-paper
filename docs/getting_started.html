<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Getting started</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Combes Organoid scRNA-seq</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="getting_started.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quality control
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_Organoid123_QC.html">Organoids Batch 1</a>
    </li>
    <li>
      <a href="02_Organoid4_QC.html">Organoid 4</a>
    </li>
    <li>
      <a href="05_Lindstrom_QC.html">Fetal kidney</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Organoids
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="03_Organoids_Integration.html">Integration</a>
    </li>
    <li>
      <a href="04_Organoids_Clustering.html">Clustering</a>
    </li>
    <li>
      <a href="04B_Organoids_Nephron.html">Nephron</a>
    </li>
    <li>
      <a href="04C_Organoids_Trajectory.html">Trajectory</a>
    </li>
    <li>
      <a href="04D_Organoids_Figures.html">Figures</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Combined
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="06_Combined_Integration.html">Integration</a>
    </li>
    <li>
      <a href="07_Combined_Clustering.html">Clustering</a>
    </li>
    <li>
      <a href="07B_Combined_Nephron.html">Nephron</a>
    </li>
    <li>
      <a href="07D_Combined_Figures.html">Figures</a>
    </li>
  </ul>
</li>
<li>
  <a href="08_Crossover.html">Crossover</a>
</li>
<li>
  <a href="99_Methods.html">Methods</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Oshlack/combes-organoid-paper">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Getting started</h1>

</div>


<p><strong>Last updated:</strong> 2018-12-05</p>
<strong>workflowr checks:</strong> <small>(Click a bullet for more information)</small>
<ul>
<li>
<p><details> <summary> <strong style="color:blue;">✔</strong> <strong>R Markdown file:</strong> up-to-date </summary></p>
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</details>
</li>
<li>
<p><details> <summary> <strong style="color:blue;">✔</strong> <strong>Environment:</strong> empty </summary></p>
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</details>
</li>
<li>
<p><details> <summary> <strong style="color:blue;">✔</strong> <strong>Seed:</strong> <code>set.seed(20180730)</code> </summary></p>
<p>The command <code>set.seed(20180730)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</details>
</li>
<li>
<p><details> <summary> <strong style="color:blue;">✔</strong> <strong>Session information:</strong> recorded </summary></p>
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</details>
</li>
<li>
<p><details> <summary> <strong style="color:blue;">✔</strong> <strong>Repository version:</strong> <a href="http://github.com/Oshlack/combes-organoid-paper/tree/09d6884919bc77b1006cddd86ad334cc5245c356" target="_blank">09d6884</a> </summary></p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility. The version displayed above was the version of the Git repository at the time these results were generated. <br><br> Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
<pre><code>
Ignored files:
    Ignored:    .DS_Store
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    analysis/cache.bak.20181031/
    Ignored:    analysis/cache.bak/
    Ignored:    analysis/cache.lind2.20181114/
    Ignored:    analysis/cache/
    Ignored:    data/Lindstrom2/
    Ignored:    data/processed.bak.20181031/
    Ignored:    data/processed.bak/
    Ignored:    data/processed.lind2.20181114/
    Ignored:    packrat/lib-R/
    Ignored:    packrat/lib-ext/
    Ignored:    packrat/lib/
    Ignored:    packrat/src/
    Ignored:    test.csv.zip

</code></pre>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes. </details>
</li>
</ul>
<details> <summary> <small><strong>Expand here to see past versions:</strong></small> </summary>
<ul>
<table style="border-collapse:separate; border-spacing:5px;">
<thead>
<tr>
<th style="text-align:left;">
File
</th>
<th style="text-align:left;">
Version
</th>
<th style="text-align:left;">
Author
</th>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Rmd
</td>
<td style="text-align:left;">
<a href="http://github.com/Oshlack/combes-organoid-paper/blob/09d6884919bc77b1006cddd86ad334cc5245c356/analysis/getting_started.Rmd" target="_blank">09d6884</a>
</td>
<td style="text-align:left;">
Luke Zappia
</td>
<td style="text-align:left;">
2018-12-05
</td>
<td style="text-align:left;">
Update home page and getting started
</td>
</tr>
<tr>
<td style="text-align:left;">
html
</td>
<td style="text-align:left;">
<a href="https://cdn.rawgit.com/http://github.com/Oshlack/combes-organoid-paper/a61f9c98a128e5dd7b637a5b07f5eb81a9e10978/docs/getting_started.html" target="_blank">a61f9c9</a>
</td>
<td style="text-align:left;">
Luke Zappia
</td>
<td style="text-align:left;">
2018-09-13
</td>
<td style="text-align:left;">
Rebuild site
</td>
</tr>
</tbody>
</table>
</ul>
<p></details></p>
<hr />
<p>This page describes how to download the data and code used in this analysis, set up the project directory and rerun the analysis. We have use the <a href="https://jdblischak.github.io/workflowr/" title="Workflowr"><code>workflowr</code></a> package to organise the analysis and insert reproducibilty information into the output documents. The <a href="https://rstudio.github.io/packrat/" title="Packrat"><code>packrat</code></a> package has also been used to manage R package versions and dependencies.</p>
<div id="getting-the-code" class="section level1">
<h1>Getting the code</h1>
<p>All the code and outputs of analysis are available from GitHub at <a href="https://github.com/Oshlack/combes-organoid-paper" class="uri">https://github.com/Oshlack/combes-organoid-paper</a>. If you want to replicate the analysis you can either fork the repository and clone it or download the repository as a zipped directory.</p>
<p>Once you have a local copy of the repository you should see the following directory structure:</p>
<ul>
<li><code>analysis/</code> - Contains the RMarkdown documents with the various stages of analysis. These are numbered according to the order they should be run.</li>
<li><code>data/</code> - This directory contains the data files used in the analysis with each dataset in it’s own sub-directory (see <a href="#data">Getting the data</a> for details). Processed intermediate data files will also be placed here.</li>
<li><code>output/</code> - Directory for output files produced by the analysis, each analysis step has it’s own sub-directory.</li>
<li><code>docs/</code> - This directory contains the analysis website hosted at <a href="http://oshlacklab.com/combes-organoid-paper" class="uri">http://oshlacklab.com/combes-organoid-paper</a>, including image files.</li>
<li><code>R/</code> - R scripts with custom functions used in some analysis stages.</li>
<li><code>packrat/</code> - Directory created by <code>packrat</code> that contains details of the R packages and versions used in the analysis.</li>
<li><code>README.md</code> - README describing the project.</li>
<li><code>.Rprofile</code> - Custom R profile for the project including set up for <code>packrat</code> and <code>workflowr</code>.</li>
<li><code>.gitignore</code> - Details of files and directories that are excluded from the repository.</li>
<li><code>_workflowr.yml</code> - Workflowr configuration file.</li>
<li><code>combes-organoid-paper.Rproj</code> - RStudio project file.</li>
</ul>
</div>
<div id="installing-packages" class="section level1">
<h1>Installing packages</h1>
<p>Packages and dependencies for this project are managed using <a href="https://rstudio.github.io/packrat/" title="Packrat"><code>packrat</code></a>. This should allow you to install and use the same package versions as we have used for the analysis. <code>packrat</code> should automatically take care of this process for you the first time that you open R in the project directory. If for some reason this does not happen you may need to run the following commands:</p>
<pre class="r"><code>install.packages(&quot;packrat&quot;)
packrat::restore()</code></pre>
<p>Note that a clean install of all the required packages can take a significant amount of time when the project is first opened.</p>
</div>
<div id="data" class="section level1">
<h1>Getting the data</h1>
<p>In this project we have used three scRNA-seq datasets, two batches of kidney organoids, the first containing three samples and the second a single organoid, and a human fetal kidney dataset published by Lindstrom et al. The organoid datasets can be downloaded from GEO accession number <a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE114802" title="GEO Organoids">GSE114802</a> and the fetal kidney dataset from GEO <a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE102596" title="GEO Lindstrom">GSE102596</a>.</p>
<p>Once the datasets have been downloaded they need to be extracted, placed in the correct directorys and renamed. The analysis code assumes the following directory structure inside the <code>data/</code> directory:</p>
<ul>
<li><code>Lindstrom/</code>
<ul>
<li><code>GSM2741551_count-table-human16w.tsv</code></li>
</ul></li>
<li><code>Organoid123/</code>
<ul>
<li><code>barcodes.tsv</code></li>
<li><code>genes.tsv</code></li>
<li><code>matrix.mtx</code></li>
</ul></li>
<li><code>Organoid4/</code>
<ul>
<li><code>barcodes.tsv</code></li>
<li><code>genes.tsv</code></li>
<li><code>matrix.mtx</code></li>
</ul></li>
</ul>
<p>Additional data files used during the analysis are provided as part of the repository. Intermediate data files created during the analysis will be placed in <code>data/processed</code>. These are used by later stages of the analysis so should not be moved, altered or deleted.</p>
</div>
<div id="running-the-analysis" class="section level1">
<h1>Running the analysis</h1>
<p>The analysis directory contains the following analysis files:</p>
<ul>
<li><code>01_Organoid123_QC.Rmd</code></li>
<li><code>02_Organoid4_QC.Rmd</code></li>
<li><code>03_Organoids_Integration.Rmd</code></li>
<li><code>04_Organoids_Clustering.Rmd</code></li>
<li><code>04B_Organoids_Nephron.Rmd</code></li>
<li><code>04C_Organoids_Trajectory.Rmd</code></li>
<li><code>04D_Organoids_Figures.Rmd</code></li>
<li><code>05_Lindstrom_QC.Rmd</code></li>
<li><code>06_Combined_Integration.Rmd</code></li>
<li><code>07_Combined_Clustering.Rmd</code></li>
<li><code>07B_Combined_Nephron.Rmd</code></li>
<li><code>07C_Combined_Trajectory.Rmd</code></li>
<li><code>07D_Combined_Figures.Rmd</code></li>
<li><code>08_Crossover.Rmd</code></li>
<li><code>99_Methods.Rmd</code></li>
</ul>
<p>As indicated by the numbering they should be run in this order. If you want to rerun the entire analysis this can be easily done using <code>workflowr</code>.</p>
<pre class="r"><code>workflowr::wflow_build(republish = TRUE)</code></pre>
<p>It is important to consider the computer and environment you are using before doing this. Running this analysis from scratch requires a considerable amount of time, disk space and memory. Some stages of the analysis also assume that multiple (10) cores are available for processing. If you have fewer cores available you will need to change the following line in the relevant files and provide the number of cores that are available for use.</p>
<pre class="r"><code>bpparam &lt;- MulticoreParam(workers = 10)</code></pre>
<p>It is also possible to run individual stages of the analysis, either by providing the names of the file you want to run to <code>workflowr::wflow_build()</code> or by manually knitting the document (for example using the ‘Kint’ button in RStudio).</p>
<div id="caching" class="section level2">
<h2>Caching</h2>
<p>To avoid having to repeatably rerun long running sections of the analysis we have turned on caching in the analysis documents. However, this comes at a tradeoff with disk space, useability and (potentially but unlikely if careful) reproducibility. In most cases this should not be a problem but it is something to be aware of. In particularly there is a incompatibilty with caching and <code>workflowr</code> that can cause images to not appear in the resulting HTML files (see this <a href="https://github.com/jdblischak/workflowr/issues/113" title="Workflowr caching issue">GitHub issue</a> for more details). If you have already run part of the analysis (and therefore have a cache) and want to rerun a document the safest option is the use the RStudio ‘Knit’ button.</p>
<pre class="r"><code>devtools::session_info()</code></pre>
</div>
</div>

<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>

<hr>
<p>
  This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a>
  analysis was created with
  <a href="https://github.com/jdblischak/workflowr">workflowr</a> 1.1.1
</p>
<hr>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
